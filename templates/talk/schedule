[% PROCESS common %]
[% WRAPPER ui
   title = { en => 'Schedule', fr => 'Emploi du temps', it => 'Programma', pt => 'Programa', de => 'Programm'}
%]

[% IF not ( global.request.user.is_orga
         or global.request.user.is_staff
         or global.config.talks_show_schedule ) %]
<t>
 <en>The schedule is not ready to be seen.</en>
 <fr>Les horaires ne sont pas encore finalisés.</fr>
 <it>Il programma non è ancora pronto.</it>
 <pt>O programa ainda está em construção.</pt>
 <de>Das Programm ist noch in Arbeit.</de>
</t>
[% ELSE %]
[% IF todo.size %]
<p>
 <t>
  <fr>Les date et lieu de ces présentations n'ont pas encore été décidés.</fr>
  <en>The time and place of the following talks haven't been decided yet.</en>
  <pt>TRANSLATEME</pt>
  <it>TRANSLATEME</it>
  <de>TRANSLATEME</de>
  <hu>TRANSLATEME</hu>
 </t>
</p>
<table>
 <tr>
  <th><t><en>Speaker</en><fr>Présentateur</fr><pt>Orador</pt><it>Oratore</it><de>Vortragende/r</de></t></th>
  <th><t><en>Talk/event title</en><fr>Présentation/événement</fr><pt>Título/evento</pt><it>Intervento/evento</it><de>Titel/event</de></t></th>
  <th><t><en>Duration</en><fr>Durée</fr><it>Durata</it><pt>Duração</pt><de>Dauer</de></t></th>
 </tr>
 [% FOREACH t IN todo %]
 <tr>
 [% IF t.type == 'Act::Talk' %]
  <td><a href="[% make_uri_info('user', t.user.user_id) %]">
   [% user_info(t.user) %]
  </a></td>
  <td>[% talk_confirmed_link(t) %]
      [% talk_modify_link(t) %]
  </td>
 [% ELSE %]
  <td>&nbsp;</td>
  <td>[% event_link(t) %]
      [% event_modify_link(t) %]
 [% END %]
  <td>[% t.duration %] <t><en>minutes</en><fr>minutes</fr><pt>minutos</pt><it>minuti</it><de>Minuten</de></t>
  </td>
 </tr>
 [% END %]
</table>
<hr />
[% END %]
<p>
<t>
 <fr>Les présentations en gras ont été confirmées par leurs auteurs.</fr>
 <en>Talks in bold type have been confirmed by their respective speakers.</en>
 <it>Gli interventi in <b>grassetto</b> sono stati confermati dai rispettivi oratori.</it>
 <pt>As apresentações em <b>negrito</b> já foram confirmadas pelos respectivos autores.</pt>
 <de>Vorträge in <b>fett</b> wurden von den Vortragenden bestätigt.</de>
</t>
</p>
[% FOREACH d IN table.keys.sort %]
[% date = d.replace('$', ' 00:00:00' ) %]
<a name="[% d %]"></a>
<h2>[% date_format(date, 'date_full') | ucfirst %]</h2>
<table border="0">
 <tr class="header">
  <th>
   <t><en>Time</en><fr>Heure</fr><it>Ora</it><pt>Hora</pt><de>Zeit</de></t>
  </th>
  [% FOREACH r IN room.keys.sort %]
  <th colspan="[% width.$r.$d %]">
    <t><fr>Salle [% global.config.rooms.$r %]</fr>
       <en>Room [% global.config.rooms.$r %]</en>
       <pt>Sala [% global.config.rooms.$r %]</pt>
       <it>Stanza [% global.config.rooms.$r %]</it>
       <de>Raum: [% global.config.rooms.$r %]</de>
       </t></th>
  [% END %]
 </tr>
 [% FOREACH row IN table.$d %]
 <tr class="header">
  [% FOREACH col IN row %]
   [% IF loop.first %]
     <td align="center" valign="top" class="header">[% col %]</td>
   [% ELSE %]
     <td valign="top" [% IF col.height > 1 %]rowspan="[% col.height %]"[% END %] [% IF col.room %]class="[% col.room %]"[% IF col.room.match('^(?:out|venue)$') %] colspan="[% maxwidth.$d %]"[% END %][% END %]>
       [% timeslot(col) %]
     </td>
   [% END %]
  [% END %]
 </tr>
 [% END %]
</table>

[% END %]
[% END %]
[% END %]
